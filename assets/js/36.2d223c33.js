(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{509:function(s,n,a){"use strict";a.r(n);var e=a(34),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_1-6-参与juno开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-6-参与juno开发"}},[s._v("#")]),s._v(" 1.6 参与JUNO开发")]),s._v(" "),a("h2",{attrs:{id:"目录结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#目录结构"}},[s._v("#")]),s._v(" 目录结构")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("── CONTRIBUTING.md\n├── LICENSE\n├── Makefile\n├── README.md\n├── api \n│   └── apiv1 "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 对外api提供")]),s._v("\n├── assets "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 前端资源")]),s._v("\n├── cmd\n│   ├── juno-admin\n│   └── juno-proxy\n├── config "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# config demo")]),s._v("\n│   ├── casbin_test\n│   ├── install.toml\n│   ├── juno-grafana.ini\n│   ├── juno-prometheus.yml\n│   ├── model.conf\n│   ├── multiple-region-admin.toml\n│   ├── multiple-region-proxy.toml\n│   ├── resource.yaml\n│   └── single-region-admin.toml\n├── configs "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地开发配置，不要推送到仓库")]),s._v("\n│   ├── config-multiple-region-admin.toml\n│   └── config-single-region-admin.toml\n├── data "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mock 数据")]),s._v("\n│   ├── "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v("\n│   ├── grafana\n│   └── mockdata\n├── docs\n│   ├── LICENSEHEADER.txt\n│   ├── logo.png\n│   └── wiki-cn\n├── go.mod\n├── go.sum\n├── internal "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 内部逻辑")]),s._v("\n│   ├── app\n│   └── pkg\n├── logs "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 本地开发日志")]),s._v("\n│   ├── biz.json\n│   └── system.json\n├── pkg "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 外部可引用代码")]),s._v("\n│   ├── auth\n│   ├── cfg\n│   ├── constx\n│   ├── errorconst\n│   ├── model\n│   ├── pb\n│   └── util\n└── script\n    └── build\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br")])]),a("h3",{attrs:{id:"internal"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#internal"}},[s._v("#")]),s._v(" internal")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("├── app\n│   ├── adminengine "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# router")]),s._v("\n│   │   ├── engine_admin.go\n│   │   ├── engine_install.go\n│   │   ├── form_validator.go\n│   │   ├── router_admin.go\n│   │   └── router_api.go\n│   ├── core \n│   │   └── core.go\n│   ├── middleware\n│   │   ├── casbin.go\n│   │   ├── gateway.go\n│   │   ├── login.go\n│   │   ├── openauth.go\n│   │   └── openauth_test.go\n│   └── proxyengine\n│       └── engine.go\n└── pkg\n    ├── datasource\n    │   └── datasource.go\n    ├── "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n    │   ├── base.go\n    │   ├── mock_app.go\n    │   └── mock_setting.go\n    ├── invoker "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 数据源初始化")]),s._v("\n    │   └── invoker.go\n    ├── packages\n    │   ├── contrib\n    │   └── roundtrip\n    └── "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v("\n        ├── agent\n        ├── analysis\n        ├── app_topology.go\n        ├── appevent\n        ├── applog\n        ├── assist\n        ├── auth\n        ├── casbin\n        ├── clientproxy\n        ├── confgo\n        ├── confgov2\n        ├── configresource\n        ├── gateway\n        ├── grafana\n        ├── grpcgovern\n        ├── init.go\n        ├── notify\n        ├── openauth\n        ├── parse\n        ├── permission\n        ├── pprof\n        ├── proxy\n        ├── report\n        ├── resource\n        ├── service_suite_test.go\n        ├── supervisor\n        ├── system\n        ├── tool.go\n        └── user\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br")])]),a("h2",{attrs:{id:"开发方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发方式"}},[s._v("#")]),s._v(" 开发方式")]),s._v(" "),a("h3",{attrs:{id:"数据库初始化与调整"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据库初始化与调整"}},[s._v("#")]),s._v(" 数据库初始化与调整")]),s._v(" "),a("p",[s._v("参考Makefile文件，以下是相关的数据库操作，初始化、数据清理、数据mock")]),s._v(" "),a("p",[s._v("相关代码逻辑在 "),a("code",[s._v("internal/pkg/install")]),s._v("中")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("database.install:\n    @go run cmd/juno-admin/main.go --config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config/install.toml --install"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\ndatabase.clear:\n    @go run cmd/juno-admin/main.go --config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config/install.toml --clear"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\ndatabase.mock:\n    @go run cmd/juno-admin/main.go --config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config/install.toml --mock"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true\ndatabase.debug: database.clear database.install database.mock\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"后端启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#后端启动"}},[s._v("#")]),s._v(" 后端启动")]),s._v(" "),a("p",[s._v("有两种模式:")]),s._v(" "),a("ul",[a("li",[s._v("single-region-admin")])]),s._v(" "),a("p",[s._v("只调整juno功能、不涉及跨机房通信开发使用"),a("code",[s._v("make run.single-region-admin")]),s._v("即可")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("run.single-region-admin:\n    @go run cmd/juno-admin/main.go --config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config/single-region-admin.toml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("multiple-region-admin+multiple-region-proxy")])]),s._v(" "),a("p",[s._v("需要跨机房数据调用调试使用"),a("code",[s._v("make run.multiple-region-admin")]),s._v("和"),a("code",[s._v("make run.multiple-region-proxy")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("run.multiple-region-admin:\n    @go run cmd/juno-admin/main.go --config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config/multiple-region-admin.toml\nrun.multiple-region-proxy:\n    @go run cmd/juno-proxy/main.go --config"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("config/multiple-region-proxy.toml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h4",{attrs:{id:"开发配置不要推送到远端仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发配置不要推送到远端仓库"}},[s._v("#")]),s._v(" 开发配置不要推送到远端仓库")]),s._v(" "),a("p",[s._v("本地开发配置放在"),a("code",[s._v("configs")]),s._v("文件夹中，使用"),a("code",[s._v(".gitignore")]),s._v("进行文件忽略，切记不要推送、不要推送、不要推送")]),s._v(" "),a("p",[s._v("推送前代码做好审核工作")]),s._v(" "),a("h3",{attrs:{id:"前端启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前端启动"}},[s._v("#")]),s._v(" 前端启动")]),s._v(" "),a("p",[s._v("进入"),a("code",[s._v("assest")]),s._v("文件夹执行"),a("code",[s._v("npm run start")])]),s._v(" "),a("p",[s._v("修改 config/proxy.ts 里面的后端代理端口配置，即可打通本地调试")]),s._v(" "),a("p",[s._v("生产环境进行"),a("code",[s._v("npm run build")]),s._v("进行dist构建推送即可")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("├── README.md\n└── config\n    ├── config.ts\n    ├── defaultSettings.ts\n    └── proxy.ts\n├── dist\n├── favicon.png\n├── jest.config.js\n├── jsconfig.json\n├── mock\n├── node_modules\n├── package.json\n├── public\n├── src\n├── tests\n└── tsconfig.json\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("p",[s._v("访问 "),a("code",[s._v("localhost:8000")]),s._v(" 进入本地调试")])])}),[],!1,null,null,null);n.default=t.exports}}]);