(window.webpackJsonp=window.webpackJsonp||[]).push([[54],{477:function(s,t,e){"use strict";e.r(t);var a=e(27),r=Object(a.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"_9-7-扫描器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-7-扫描器"}},[s._v("#")]),s._v(" 9.7 扫描器")]),s._v(" "),e("p",[s._v("配合"),e("code",[s._v("配置中心")]),s._v("使用")]),s._v(" "),e("p",[s._v("应用启动扫描器，主要用于监听应用启动配置信息，根据监听并且解析启动配置的信息，来判断该应用是否已经接入配置中心，目前支持supervisor和systemd两种。")]),s._v(" "),e("h2",{attrs:{id:"_9-7-1-supervisor"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-7-1-supervisor"}},[s._v("#")]),s._v(" 9.7.1 supervisor")]),s._v(" "),e("p",[s._v("supervisor主要用来监听部署在agent机器上的所有的应用的一个supervisor启动的配置信息，通过解析supervisor文件来获取应用启动使用的配置文件信息，用来判断应用是否接入了配置中心。")]),s._v(" "),e("div",{staticClass:"language-toml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-toml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("plugin.supervisor")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("enable")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("     // 插件是否开启\n    "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("dir")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/supervisor/conf.d1"')]),s._v(" // 用来配置supervisor的配置目录\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("supercisor插件的主要工作：")]),s._v(" "),e("ul",[e("li",[s._v("是否打开supervisor监听")]),s._v(" "),e("li",[s._v("agent初始化时，负责将该机器上所有应用的supervisor配置信息记录在内容中")]),s._v(" "),e("li",[s._v("监听supervisor配置文件，当发现supervisor文件发生变化，则更新内存缓存的应用配置信息")]),s._v(" "),e("li",[s._v("提供配置中心应用是否接入配置中心的接口")])]),s._v(" "),e("h2",{attrs:{id:"_9-7-2-systemd"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_9-7-2-systemd"}},[s._v("#")]),s._v(" 9.7.2 systemd")]),s._v(" "),e("p",[s._v("systemd主要用来监听部署在agent机器上的所有的应用的一个systemd启动的配置信息，通过解析systemd文件来获取应用启动使用的配置文件信息，用来判断应用是否接入了配置中心。")]),s._v(" "),e("div",{staticClass:"language-toml line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-toml"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token table class-name"}},[s._v("plugin.systemd")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n    "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("enable")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v(" // 插件是否开启\n    "),e("span",{pre:!0,attrs:{class:"token key property"}},[s._v("dir")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/etc/systemd/system1"')]),s._v(" // 用来配置systemd的配置目录\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("systemd插件的主要工作：")]),s._v(" "),e("ul",[e("li",[s._v("是否打开systemd监听")]),s._v(" "),e("li",[s._v("agent初始化时，负责将该机器上所有应用的systemd配置信息记录在内容中")]),s._v(" "),e("li",[s._v("监听systemd配置文件，当发现systemd文件发生变化，则更新内存缓存的应用配置信息")]),s._v(" "),e("li",[s._v("提供配置中心应用是否接入配置中心的接口")])])])}),[],!1,null,null,null);t.default=r.exports}}]);