(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{372:function(t,s,a){t.exports=a.p+"assets/img/access_token_create_1.18b2e587.png"},373:function(t,s,a){t.exports=a.p+"assets/img/access_token_create_2.cbd6f155.png"},374:function(t,s,a){t.exports=a.p+"assets/img/access_token_create_3.25a5802e.png"},452:function(t,s,a){"use strict";a.r(s);var n=a(27),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"_12-1-api-授权"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_12-1-api-授权"}},[t._v("#")]),t._v(" 12.1 API 授权")]),t._v(" "),n("h2",{attrs:{id:"_12-1-1-创建一个-access-token"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_12-1-1-创建一个-access-token"}},[t._v("#")]),t._v(" 12.1.1 创建一个 Access Token")]),t._v(" "),n("ol",[n("li",[t._v("打开后台菜单: 系统设置 / AccessTokens，点击新建按钮")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(372),alt:""}})]),t._v(" "),n("ol",{attrs:{start:"2"}},[n("li",[t._v("输入授权应用名称")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(373),alt:""}})]),t._v(" "),n("ol",{attrs:{start:"3"}},[n("li",[t._v("创建成功后，点击小眼睛图表即可看到AppSecret")])]),t._v(" "),n("p",[n("img",{attrs:{src:a(374),alt:""}})]),t._v(" "),n("h2",{attrs:{id:"_12-1-2-访问open-api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_12-1-2-访问open-api"}},[t._v("#")]),t._v(" 12.1.2 访问Open API")]),t._v(" "),n("h3",{attrs:{id:"公共参数"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#公共参数"}},[t._v("#")]),t._v(" 公共参数")]),t._v(" "),n("p",[t._v("所有Open API都需要携带如下公共参数：")]),t._v(" "),n("table",[n("thead",[n("tr",[n("th",[t._v("参数名")]),t._v(" "),n("th",[t._v("类型")]),t._v(" "),n("th",[t._v("说明")])])]),t._v(" "),n("tbody",[n("tr",[n("td",[t._v("app_id")]),t._v(" "),n("td",[t._v("string")]),t._v(" "),n("td",[t._v("在Juno后台申请的App ID")])]),t._v(" "),n("tr",[n("td",[t._v("timestamp")]),t._v(" "),n("td",[t._v("int")]),t._v(" "),n("td",[t._v("当前Unix时间戳(秒)，如果Juno服务端收到过期的时间戳，授权失败")])]),t._v(" "),n("tr",[n("td",[t._v("nonce_str")]),t._v(" "),n("td",[t._v("string")]),t._v(" "),n("td",[t._v("随机字符串，16位")])]),t._v(" "),n("tr",[n("td",[t._v("sign")]),t._v(" "),n("td",[t._v("string")]),t._v(" "),n("td",[t._v("签名")])])])]),t._v(" "),n("p",[t._v("如果是"),n("code",[t._v("POST")]),t._v("请求，那么以上参数在 "),n("code",[t._v("Body")]),t._v(" 中，为 "),n("code",[t._v("JSON")]),t._v(" 请求体的字段。如果是 "),n("code",[t._v("GET")]),t._v(" 请求，以上参数为 "),n("code",[t._v("Query")]),t._v(" 参数。")]),t._v(" "),n("h3",{attrs:{id:"签名方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#签名方法"}},[t._v("#")]),t._v(" 签名方法")]),t._v(" "),n("ol",[n("li",[n("p",[t._v("拼接签名原文")]),t._v(" "),n("p",[t._v("签名原文由 "),n("code",[t._v("app_id")]),t._v("、"),n("code",[t._v("nonce_str")]),t._v("、"),n("code",[t._v("secret")]),t._v(" 、 "),n("code",[t._v("timstamp")]),t._v(" 组成，拼接方式如下:")]),t._v(" "),n("p",[n("code",[t._v("plainText = app_id + nonce_str+ secret + timestamp")])])]),t._v(" "),n("li",[n("p",[t._v("计算签名")]),t._v(" "),n("p",[t._v("目前使用的签名算法是 "),n("code",[t._v("md5")]),t._v("，对签名原文使用md5进行签名即可:")]),t._v(" "),n("p",[n("code",[t._v("sign = md5(plainText)")])])])]),t._v(" "),n("p",[t._v("Go 语言示例：")]),t._v(" "),n("div",{staticClass:"language-go line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-go"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//计算签名")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//md5(appId + nonceStr + secret + timestamp)")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("func")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("openAuthSign")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("appId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nonceStr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" secret "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timestamp "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("int64")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("sign "),n("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("string")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tplainText "),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":=")]),t._v(" fmt"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Sprintf")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"%s%s%s%d"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" appId"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" nonceStr"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" secret"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" timestamp"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),n("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" util"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[t._v("Md5Str")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("plainText"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);